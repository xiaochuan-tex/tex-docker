% main.tex
\documentclass{article}
\usepackage{ifplatform}
\usepackage{fontspec}

# 如果 ifplatform 检测失败，可以手动设置
\newcommand{\setupfonts}{%
    \ifdefined\macosxname
        \usepackage[fontset=mac]{ctex}
    \else\ifdefined\linuxdistname
        \usepackage[fontset=ubuntu]{ctex}
    \else
        \usepackage[fontset=windows]{ctex}
    \fi\fi
}
\setupfonts


\begin{document}
跨平台文档内容
\end{document}